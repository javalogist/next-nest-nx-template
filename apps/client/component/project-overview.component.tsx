// apps/client/components/ProjectOverview.tsx
'use client';

import {
  Card,
  Group,
  Text,
  ThemeIcon,
  SimpleGrid,
  Modal,
  Button,
  Divider,
  Space,
} from '@mantine/core';
import {
  IconFolder,
  IconPackage,
  IconFiles,
  IconSettings,
  IconBrandGithub,
  IconLock,
  IconFileText,
  IconCode,
  IconJson,
} from '@tabler/icons-react';
import { useState } from 'react';
import { ProjectItem } from '../models/project-item.model';

// const projectData: ProjectItem[] = [
//   {
//     title: 'apps',
//     description: 'Contains Next.js and NestJS applications.',
//     details: `
// ğŸ“ apps/
// â”œâ”€â”€ client/ â†’ Next.js application (frontend)
// â”‚   â”œâ”€â”€ app/ â†’ App router, pages, and layouts
// â”‚   â”œâ”€â”€ components/ â†’ App-specific components
// â”‚   â”œâ”€â”€ public/ â†’ Assets like images
// â”‚   â”œâ”€â”€ middleware.ts â†’ Middleware for API routes
// â”‚   â””â”€â”€ next-build-standalone.js â†’ Standalone build script
// â””â”€â”€ service/ â†’ NestJS application (backend)
//     â”œâ”€â”€ src/ â†’ Application modules and configuration
//     â””â”€â”€ main.ts â†’ Application entry point
//     `,
//     icon: <IconFolder size={24} />,
//   },
//   {
//     title: 'libs',
//     description: 'Shared libraries between Next.js and NestJS apps.',
//     details: `
// ğŸ“ libs/
// â”œâ”€â”€ server/ â†’ Common server-side code for NestJS apps
// â”‚   â”œâ”€â”€ config/ â†’ CORS, JWT, MongoDB, Swagger, etc.
// â”‚   â”œâ”€â”€ decorators/ â†’ Custom NestJS decorators
// â”‚   â”œâ”€â”€ dtos/ â†’ DTOs for data validation
// â”‚   â”œâ”€â”€ exceptions/ â†’ Exception handling services
// â”‚   â”œâ”€â”€ guards/ â†’ Auth guards (JWT, roles)
// â”‚   â”œâ”€â”€ middleware/ â†’ Middleware utilities
// â”‚   â””â”€â”€ utils/ â†’ Helper functions
// â””â”€â”€ common/ â†’ Shared models and API utilities
//     â”œâ”€â”€ api-response-model/ â†’ Consistent API response models
//     â”œâ”€â”€ api.client.ts â†’ API client for Next.js
//     â””â”€â”€ api-util.ts â†’ Utility functions for API calls
//     `,
//     icon: <IconPackage size={24} />,
//   },
//   {
//     title: 'dist',
//     description: 'Output directory for built applications.',
//     details: `
// ğŸ“ dist/
// â”œâ”€â”€ client/ â†’ Built Next.js application
// â””â”€â”€ service/ â†’ Built NestJS application
//     `,
//     icon: <IconFiles size={24} />,
//   },
//   {
//     title: '.nx',
//     description: 'NX workspace configuration and cache.',
//     details: `
// ğŸ“ .nx/
// â”œâ”€â”€ cache/ â†’ NX cache to improve build performance
// â””â”€â”€ workspace.json â†’ NX workspace configuration
//     `,
//     icon: <IconSettings size={24} />,
//   },
//   {
//     title: '.idea',
//     description: 'IDE-specific settings for WebStorm/IntelliJ.',
//     details: `
// ğŸ“ .idea/
// â”œâ”€â”€ project settings
// â””â”€â”€ IDE metadata files
//     `,
//     icon: <IconBrandGithub size={24} />,
//   },
//   {
//     title: 'node_modules',
//     description: 'Dependencies installed from package.json.',
//     details: `
// ğŸ“ node_modules/
// â”œâ”€â”€ All npm dependencies for the project
// â””â”€â”€ Auto-generated by npm/yarn install
//     `,
//     icon: <IconPackage size={24} />,
//   },
//   {
//     title: '.gitignore',
//     description: 'Specifies files and folders to ignore in Git.',
//     details: `
// ğŸ“„ .gitignore
// # Ignore build output, node_modules, and sensitive files.
//     `,
//     icon: <IconLock size={24} />,
//   },
//   {
//     title: 'package.json',
//     description: 'Project dependencies and scripts.',
//     details: `
// ğŸ“„ package.json
// {
//   "name": "next-nest-nx-template",
//   "version": "1.0.0",
//   "scripts": {
//     "build": "nx run-many --target=build",
//     "dev": "nx run-many --target=serve",
//     "lint": "nx run-many --target=lint"
//   }
// }
//     `,
//     icon: <IconFileText size={24} />,
//   },
//   {
//     title: 'tsconfig.base.json',
//     description: 'Base TypeScript configuration for NX.',
//     details: `
// ğŸ“„ tsconfig.base.json
// # Base configuration for all apps and libs.
//     `,
//     icon: <IconCode size={24} />,
//   },
//   {
//     title: 'nx.json',
//     description: 'NX configuration for workspace setup.',
//     details: `
// ğŸ“„ nx.json
// {
//   "npmScope": "next-nest",
//   "affected": {
//     "defaultBase": "main"
//   }
// }
//     `,
//     icon: <IconJson size={24} />,
//   },
// ];

const projectData: ProjectItem[] = [
  {
    title: 'apps',
    description: 'Contains Next.js and NestJS applications.',
    details: `
ğŸ“ apps/
â”œâ”€â”€ client/ â†’ Next.js application (frontend)
â”‚   â”œâ”€â”€ app/ â†’ App router, pages, and layouts
â”‚   â”œâ”€â”€ components/ â†’ App-specific components
â”‚   â”œâ”€â”€ public/ â†’ Static assets like images
â”‚   â”œâ”€â”€ middleware.ts â†’ Middleware for API routes
â”‚   â””â”€â”€ next-build-standalone.js â†’ Standalone build script
â””â”€â”€ service/ â†’ NestJS application (backend)
    â”œâ”€â”€ src/ â†’ Application modules and configuration
    â””â”€â”€ main.ts â†’ Application entry point
    `,
    icon: <IconFolder size={24} />,
  },
  {
    title: 'libs',
    description: 'Shared libraries between Next.js and NestJS apps.',
    details: `
ğŸ“ libs/
â”œâ”€â”€ server/ â†’ Common server-side code for NestJS apps
â”‚   â”œâ”€â”€ config/ â†’ CORS, JWT, MongoDB, Swagger, etc.
â”‚   â”œâ”€â”€ decorators/ â†’ Custom NestJS decorators
â”‚   â”œâ”€â”€ dtos/ â†’ DTOs for data validation
â”‚   â”œâ”€â”€ exceptions/ â†’ Exception handling services
â”‚   â”œâ”€â”€ guards/ â†’ Auth guards (JWT, roles)
â”‚   â”œâ”€â”€ middleware/ â†’ Middleware utilities
â”‚   â””â”€â”€ utils/ â†’ Helper functions
â””â”€â”€ common/ â†’ Shared models and API utilities
    â”œâ”€â”€ api-response-model/ â†’ Consistent API response models
    â”œâ”€â”€ api.client.ts â†’ API client for Next.js
    â””â”€â”€ api-util.ts â†’ Utility functions for API calls
    `,
    icon: <IconPackage size={24} />,
  },
  {
    title: 'dist',
    description: 'Output directory for built applications.',
    details: `
ğŸ“ dist/
â”œâ”€â”€ client/ â†’ Built Next.js application
â””â”€â”€ service/ â†’ Built NestJS application
    `,
    icon: <IconFiles size={24} />,
  },
  {
    title: '.nx',
    description: 'NX workspace configuration and cache.',
    details: `
ğŸ“ .nx/
â”œâ”€â”€ cache/ â†’ NX cache to improve build performance
â””â”€â”€ workspace.json â†’ NX workspace configuration
    `,
    icon: <IconSettings size={24} />,
  },
  {
    title: '.idea',
    description: 'IDE-specific settings for WebStorm/IntelliJ.',
    details: `
ğŸ“ .idea/
â”œâ”€â”€ project settings
â””â”€â”€ IDE metadata files
    `,
    icon: <IconBrandGithub size={24} />,
  },
  {
    title: 'node_modules',
    description: 'Dependencies installed from package.json.',
    details: `
ğŸ“ node_modules/
â”œâ”€â”€ All npm dependencies for the project
â””â”€â”€ Auto-generated by npm/yarn install
    `,
    icon: <IconPackage size={24} />,
  },
  {
    title: '.gitignore',
    description: 'Specifies files and folders to ignore in Git.',
    details: `
ğŸ“„ .gitignore
# Ignore build output, node_modules, and sensitive files.
    `,
    icon: <IconLock size={24} />,
  },
  {
    title: '.nvmrc',
    description: 'Specifies the Node.js version to use.',
    details: `
ğŸ“„ .nvmrc
# Node.js version used for the project.
    `,
    icon: <IconCode size={24} />,
  },
  {
    title: '.prettierignore',
    description: 'Files and directories ignored by Prettier.',
    details: `
ğŸ“„ .prettierignore
# Ignore files from being formatted by Prettier.
    `,
    icon: <IconFileText size={24} />,
  },
  {
    title: '.prettierrc',
    description: 'Prettier configuration file.',
    details: `
ğŸ“„ .prettierrc
# Configuration for Prettier formatting.
    `,
    icon: <IconFileText size={24} />,
  },
  {
    title: 'eslint.config.mjs',
    description: 'ESLint configuration for code quality.',
    details: `
ğŸ“„ eslint.config.mjs
# ESLint configuration for linting.
    `,
    icon: <IconCode size={24} />,
  },
  {
    title: 'nx.json',
    description: 'NX configuration for workspace setup.',
    details: `
ğŸ“„ nx.json
{
  "npmScope": "next-nest",
  "affected": {
    "defaultBase": "main"
  }
}
    `,
    icon: <IconJson size={24} />,
  },
  {
    title: 'package.json',
    description: 'Project dependencies and scripts.',
    details: `
ğŸ“„ package.json
{
  "name": "next-nest-nx-template",
  "version": "1.0.0",
  "scripts": {
    "build": "nx run-many --target=build",
    "dev": "nx run-many --target=serve",
    "lint": "nx run-many --target=lint"
  }
}
    `,
    icon: <IconFileText size={24} />,
  },
  {
    title: 'package-lock.json',
    description: 'Lock file to ensure consistent dependency versions.',
    details: `
ğŸ“„ package-lock.json
# Auto-generated lock file with dependency versions.
    `,
    icon: <IconLock size={24} />,
  },
  {
    title: 'README.md',
    description: 'Project documentation and guidelines.',
    details: `
ğŸ“„ README.md
# Documentation for the project.
    `,
    icon: <IconFileText size={24} />,
  },
  {
    title: 'text.txt',
    description: 'Sample text file for reference.',
    details: `
ğŸ“„ text.txt
# Sample file for text content.
    `,
    icon: <IconFileText size={24} />,
  },
  {
    title: 'tsconfig.base.json',
    description: 'Base TypeScript configuration for NX.',
    details: `
ğŸ“„ tsconfig.base.json
# Base configuration for all apps and libs.
    `,
    icon: <IconCode size={24} />,
  },
];

export default function ProjectOverview() {
  const [modalData, setModalData] = useState<ProjectItem | null>(null);

  return (
    <>
      <SimpleGrid cols={{ base: 1, sm: 2, md: 3 }} spacing="lg">
        {projectData.map((item, index) => (
          <Card
            key={index}
            shadow="sm"
            padding="lg"
            radius="md"
            withBorder
            onClick={() => setModalData(item)}
            style={{
              cursor: 'pointer',
              transition: 'transform 0.2s ease-in-out',
            }}
            onMouseEnter={(e) =>
              (e.currentTarget.style.transform = 'scale(1.05)')
            }
            onMouseLeave={(e) => (e.currentTarget.style.transform = 'scale(1)')}
          >
            <Group>
              <ThemeIcon color="blue" size="lg" radius="md">
                {item.icon}
              </ThemeIcon>
              <Text size="lg" fw={500}>
                {item.title}
              </Text>
            </Group>
            <Text size="sm" c="dimmed" mt="sm">
              {item.description}
            </Text>
          </Card>
        ))}
      </SimpleGrid>

      {/* Modal for showing details */}
      <Modal
        opened={!!modalData}
        onClose={() => setModalData(null)}
        title={
          <Text size="lg" fw={700}>
            {modalData?.title} Details
          </Text>
        }
        size="lg"
      >
        <Divider mb="md" />
        <pre
          style={{
            padding: '12px',
            borderRadius: '5px',
            whiteSpace: 'pre-wrap',
          }}
        >
          {modalData?.details}
        </pre>
        <Space h="md" />
        <Button
          variant="light"
          color="blue"
          fullWidth
          onClick={() => setModalData(null)}
        >
          Close
        </Button>
      </Modal>
    </>
  );
}
